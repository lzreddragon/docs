"use strict";(self.webpackChunksonic_red_dragon_docs=self.webpackChunksonic_red_dragon_docs||[]).push([[2134],{2087:(e,n,t)=>{t.d(n,{A:()=>a});const a={animationContainer:"animationContainer_qFbi",animationTitle:"animationTitle_Aunz",animationDescription:"animationDescription_Ov4W",animationError:"animationError_yvkm",votingPowerContainer:"votingPowerContainer_rVam",timelineLabels:"timelineLabels_ymyL",votingPowerTrack:"votingPowerTrack_ioTj","voting-power-bar":"voting-power-bar_YdRF",partnerBoostContainer:"partnerBoostContainer_Nbx6",partner:"partner_oQK4",partnerName:"partnerName_jHI0",boostTrack:"boostTrack_sueO","boost-fill":"boost-fill_csU7",percentage:"percentage_BL8G",totalAllocation:"totalAllocation_q9KR",totalLabel:"totalLabel_p4kt",totalBar:"totalBar_mqeA",pulse:"pulse_iDMA",calculationContainer:"calculationContainer_ZWH2",inputSide:"inputSide_qcOC",resultSide:"resultSide_AwPG",arrowRight:"arrowRight_wgI2",processingText:"processingText_xIPk","input-cube":"input-cube_V7bs","result-cube":"result-cube_ls1g","input-value":"input-value_hal2","result-value":"result-value_TNvy",crossChainContainer:"crossChainContainer_uGQt",chainBox:"chainBox_JwIk",chainLabel:"chainLabel_WrpK",nodeBox:"nodeBox_voFk",nodeLabel:"nodeLabel_yKzM",arrowSvg:"arrowSvg_BK05",mermaidContainer:"mermaidContainer_KO9S",mermaidTitle:"mermaidTitle_u_uO",mermaidCaption:"mermaidCaption_wbnp",feeSystemContainer:"feeSystemContainer__h_q",tokenSwapNode:"tokenSwapNode_lvrn",feePoolNode:"feePoolNode_iq4E",feeDistributionContainer:"feeDistributionContainer_Ql3t",feeDestinationsContainer:"feeDestinationsContainer_OiiH",feeDestinationNode:"feeDestinationNode_Q2q4","jackpot-node":"jackpot-node_U6t5","ve69lp-node":"ve69lp-node_mq1a","burn-node":"burn-node_Ktzb",percentTag:"percentTag_FQpB",mermaidError:"mermaidError_GTf9",mermaidLoading:"mermaidLoading_iCyq",animatedDiagramContainer:"animatedDiagramContainer__0gF",animatedContent:"animatedContent_QaIs",animatedNode:"animatedNode_MLYw",connectionSvg:"connectionSvg_kuFY",connectionLabel:"connectionLabel_BwvR",nodeContract:"nodeContract_mLML",nodeEvent:"nodeEvent_qLpj",nodeProcess:"nodeProcess_N9cH",nodeUser:"nodeUser_IMZv",flowChartContainer:"flowChartContainer_LoOU",flowChartStep:"flowChartStep_hHlJ",flowChartIcon:"flowChartIcon_d9lt",flowChartText:"flowChartText_Oh32",animationLoading:"animationLoading_vAVv",enhancedMermaidContainer:"enhancedMermaidContainer_IPf6",loadingIndicator:"loadingIndicator_dVEi",loadingPulse:"loadingPulse_FCIa",rendered:"rendered_Ku9G",fadeIn:"fadeIn_GJ3U",animatedCard:"animatedCard_m5VD",withHover:"withHover_QfE_",cardIcon:"cardIcon_BHXH",cardTitle:"cardTitle_Ppq0",cardContent:"cardContent_d8Ko","cardColor--primary":"cardColor--primary_gH3B","cardColor--success":"cardColor--success_DN36","cardColor--warning":"cardColor--warning_pEQU","cardColor--danger":"cardColor--danger_jZsL",standardMermaidContainer:"standardMermaidContainer_NOO0",mermaid:"mermaid_IJ4R",processed:"processed_VcJq",mermaidWrapper:"mermaidWrapper_XkJf",mermaidContent:"mermaidContent_UpoX"}},5537:(e,n,t)=>{t.d(n,{A:()=>y});var a=t(6540),r=t(4164),i=t(5627),o=t(6347),s=t(372),l=t(604),c=t(1861),d=t(8749);function u(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a})))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function m({queryString:e=!1,groupId:n}){const t=(0,o.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(r),(0,a.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})}),[r,t])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,i=h(e),[o,l]=(0,a.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[c,u]=m({queryString:t,groupId:r}),[g,v]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,d.Dv)(n);return[t,(0,a.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),b=(()=>{const e=c??g;return p({value:e,tabValues:i})?e:null})();(0,s.A)((()=>{b&&l(b)}),[b]);return{selectedValue:o,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),v(e)}),[u,v,i]),tabValues:i}}var v=t(9136);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(4848);function f({className:e,block:n,selectedValue:t,selectValue:a,tabValues:o}){const s=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const n=e.currentTarget,r=s.indexOf(n),i=o[r].value;i!==t&&(l(n),a(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:o.map((({value:e,label:n,attributes:a})=>(0,x.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{s.push(e)},onKeyDown:d,onClick:c,...a,className:(0,r.A)("tabs__item",b.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function j({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find((e=>e.props.value===t));return e?(0,a.cloneElement)(e,{className:(0,r.A)("margin-top--md",e.props.className)}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function w(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,x.jsx)(f,{...n,...e}),(0,x.jsx)(j,{...n,...e})]})}function y(e){const n=(0,v.A)();return(0,x.jsx)(w,{...e,children:u(e.children)},String(n))}},7580:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>v,contentTitle:()=>g,default:()=>f,frontMatter:()=>m,metadata:()=>a,toc:()=>b});const a=JSON.parse('{"id":"contracts/math/ve69lp-math","title":"ve69LPMath","description":"Vote-escrowed token mathematical library for time-weighted staking and governance","source":"@site/docs/contracts/math/ve69lp-math.md","sourceDirName":"contracts/math","slug":"/contracts/math/ve69lp-math","permalink":"/contracts/math/ve69lp-math","draft":false,"unlisted":false,"editUrl":"https://github.com/wenakita/sonicreddragon-docs/edit/main/docs/contracts/math/ve69lp-math.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"ve69LPMath","description":"Vote-escrowed token mathematical library for time-weighted staking and governance"},"sidebar":"contracts","previous":{"title":"HermesMath","permalink":"/contracts/math/hermes-math"},"next":{"title":"DragonDateTimeLib","permalink":"/contracts/math/date-time-lib"}}');var r=t(4848),i=t(8453),o=t(5537),s=t(9329),l=t(6540),c=t(2776),d=t(2087);function u(){const e=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=c.default.timeline({easing:"easeOutExpo",duration:2e3,loop:!0,autoplay:!0});return e.add({targets:".voting-power-bar",width:"100%",backgroundColor:"#4CAF50",duration:500}),e.add({targets:".voting-power-bar",width:"75%",backgroundColor:"#8BC34A",duration:1e3}),e.add({targets:".voting-power-bar",width:"50%",backgroundColor:"#FFC107",duration:1e3}),e.add({targets:".voting-power-bar",width:"25%",backgroundColor:"#FF5722",duration:1e3}),e.add({targets:".voting-power-bar",width:"5%",backgroundColor:"#F44336",duration:500}),()=>{e.pause()}}),[]),(0,r.jsxs)("div",{className:d.A.animationContainer,ref:e,children:[(0,r.jsx)("h3",{className:d.A.animationTitle,children:"Voting Power Time Decay"}),(0,r.jsx)("p",{className:d.A.animationDescription,children:"Visualizing how voting power decreases linearly as time passes and lock expiration approaches"}),(0,r.jsxs)("div",{className:d.A.votingPowerContainer,children:[(0,r.jsxs)("div",{className:d.A.timelineLabels,children:[(0,r.jsx)("span",{children:"Lock Start"}),(0,r.jsx)("span",{children:"Lock End"})]}),(0,r.jsx)("div",{className:d.A.votingPowerTrack,children:(0,r.jsx)("div",{className:"voting-power-bar"})}),(0,r.jsxs)("div",{className:d.A.timelineLabels,children:[(0,r.jsx)("span",{children:"100% Power"}),(0,r.jsx)("span",{children:"0% Power"})]})]})]})}function h(){const e=(0,l.useRef)(null);return(0,l.useEffect)((()=>{const e=c.default.timeline({easing:"easeOutElastic(1, .8)",loop:!0,autoplay:!0});return e.add({targets:".boost-fill",width:function(e,n){return[0,"20%"]},duration:1e3,delay:c.default.stagger(100)}),e.add({targets:".boost-fill",width:function(e,n){const t=["45%","30%","15%","8%","2%"];return t[n%t.length]},backgroundColor:function(e,n){const t=["#4CAF50","#8BC34A","#FFC107","#FF9800","#FF5722"];return t[n%t.length]},duration:2e3,delay:c.default.stagger(150)}),e.add({targets:".boost-fill",width:"20%",backgroundColor:"#2196F3",duration:1e3,delay:c.default.stagger(50,{direction:"reverse"})}),()=>{e.pause()}}),[]),(0,r.jsxs)("div",{className:d.A.animationContainer,ref:e,children:[(0,r.jsx)("h3",{className:d.A.animationTitle,children:"Partner Probability Boost Distribution"}),(0,r.jsx)("p",{className:d.A.animationDescription,children:"Showing how the 6.9% probability boost is distributed among partners based on votes"}),(0,r.jsxs)("div",{className:d.A.partnerBoostContainer,children:[["Partner A","Partner B","Partner C","Partner D","Partner E"].map(((e,n)=>(0,r.jsxs)("div",{className:d.A.partner,children:[(0,r.jsx)("div",{className:d.A.partnerName,children:e}),(0,r.jsx)("div",{className:d.A.boostTrack,children:(0,r.jsx)("div",{className:"boost-fill"})}),(0,r.jsx)("div",{className:d.A.percentage,children:"0%"})]},n))),(0,r.jsxs)("div",{className:d.A.totalAllocation,children:[(0,r.jsx)("div",{className:d.A.totalLabel,children:"Total Allocation: 6.9%"}),(0,r.jsx)("div",{className:d.A.totalBar})]})]})]})}function p(){const e=(0,l.useRef)(null),n=(0,l.useRef)(null),[t,a]=(0,l.useState)(null);return(0,l.useEffect)((()=>{let t=!0;try{if(!e.current)return;n.current=c.default.timeline({easing:"easeOutQuad",loop:!0,autoplay:!0}),n.current.add({targets:e.current.querySelector(".input-cube"),scale:[0,1],opacity:[0,1],duration:800}),n.current.add({targets:e.current.querySelector(".input-value"),opacity:[0,1],translateY:[10,0],duration:400}),n.current.add({targets:e.current.querySelector(".processing-steps"),opacity:[0,1],translateY:[20,0],duration:600,delay:200}),n.current.add({targets:e.current.querySelector(".input-cube"),scale:.6,translateX:-100,duration:800,delay:400}),n.current.add({targets:e.current.querySelector(".result-cube"),scale:[0,1],opacity:[0,1],translateX:[0,100],duration:800}),n.current.add({targets:e.current.querySelector(".result-value"),opacity:[0,1],duration:400}),n.current.add({duration:1500}),n.current.add({targets:e.current.querySelectorAll(".input-cube, .result-cube, .input-value, .result-value, .processing-steps"),opacity:0,translateX:0,translateY:0,scale:0,duration:600})}catch(r){console.error("Animation setup error:",r),t&&a("Failed to initialize animation")}return()=>{t=!1,n.current&&(n.current.pause(),n.current=null)}}),[]),t?(0,r.jsxs)("div",{className:d.A.animationError,children:[(0,r.jsxs)("p",{children:["Unable to load animation: ",t]}),(0,r.jsx)("p",{children:"Please refresh the page or try again later."})]}):(0,r.jsxs)("div",{className:d.A.animationContainer,ref:e,children:[(0,r.jsx)("h3",{className:d.A.animationTitle,children:"Cube Root Calculation"}),(0,r.jsx)("p",{className:d.A.animationDescription,children:"Visualizing how the cube root mathematical operation works"}),(0,r.jsxs)("div",{className:d.A.calculationContainer,children:[(0,r.jsxs)("div",{className:d.A.inputSide,children:[(0,r.jsx)("div",{className:"input-cube"}),(0,r.jsx)("div",{className:"input-value",children:"x\xb3"})]}),(0,r.jsxs)("div",{className:"processing-steps",children:[(0,r.jsx)("div",{className:d.A.arrowRight}),(0,r.jsx)("div",{className:d.A.processingText,children:"Cube Root Operation"}),(0,r.jsx)("div",{className:d.A.arrowRight})]}),(0,r.jsxs)("div",{className:d.A.resultSide,children:[(0,r.jsx)("div",{className:"result-cube"}),(0,r.jsx)("div",{className:"result-value",children:"x"})]})]})]})}const m={sidebar_position:5,title:"ve69LPMath",description:"Vote-escrowed token mathematical library for time-weighted staking and governance"},g="ve69LPMath",v={},b=[{value:"Overview",id:"overview",level:2},{value:"Key Functions",id:"key-functions",level:2},{value:"Integration Examples",id:"integration-examples",level:2},{value:"Governance Voting Power",id:"governance-voting-power",level:3},{value:"Reward Boost Calculation",id:"reward-boost-calculation",level:3},{value:"Time-Weighted Staking Model",id:"time-weighted-staking-model",level:2},{value:"Partner Probability Boost",id:"partner-probability-boost",level:2},{value:"Gas Optimization",id:"gas-optimization",level:2}];function x(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ve69lpmath",children:"ve69LPMath"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Vote-escrowed token mathematical library for time-weighted staking and governance"})}),"\n",(0,r.jsxs)("div",{className:"contract-badges",children:[(0,r.jsx)("span",{className:"contract-badge governance",children:"Governance"}),(0,r.jsx)("span",{className:"contract-badge staking",children:"Staking"}),(0,r.jsx)("span",{className:"contract-badge liquidity",children:"Liquidity"})]}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"ve69LPMath"})," library provides the mathematical foundation for the vote-escrowed token system, enabling time-weighted staking and governance power. This implementation follows the veCRV model pioneered by Curve Finance, with specialized adaptations for the OmniDragon ecosystem."]}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart TB\n    subgraph "Token Locking System"\n        Lock["Lock LP Tokens"]\n        Decay["Time Decay"]\n        Boost["Boost Calculation"]\n        Power["Voting Power"]\n    end\n    \n    subgraph "Applications"\n        Governance["Governance Voting"]\n        FeesBoost["Trading Fee Boost"]\n        JackpotBoost["Jackpot Win Boost"]\n    end\n    \n    Lock --\x3e Decay\n    Decay --\x3e Power\n    Lock --\x3e Boost\n    Boost --\x3e FeesBoost\n    Boost --\x3e JackpotBoost\n    Power --\x3e Governance\n    \n    classDef highlight fill:#f96,stroke:#333,stroke-width:2px;\n    class Lock,Power highlight;'}),"\n",(0,r.jsx)(n.h2,{id:"key-functions",children:"Key Functions"}),"\n",(0,r.jsx)(n.p,{children:"The library provides specialized mathematical functions for the vote-escrowed token system."}),"\n",(0,r.jsx)(u,{}),"\n",(0,r.jsx)("div",{className:"function-signature",children:(0,r.jsx)(n.p,{children:"function calculateVotingPower(uint256 amount, uint256 lockDuration, uint256 maxLockDuration) internal pure returns (uint256)"})}),"\n",(0,r.jsx)(n.p,{children:"Calculates the voting power based on locked amount and duration, where longer locks receive proportionally more voting power."}),"\n",(0,r.jsx)("div",{className:"function-signature",children:(0,r.jsx)(n.p,{children:"function calculateDecay(uint256 initialVotingPower, uint256 timeElapsed, uint256 lockDuration) internal pure returns (uint256)"})}),"\n",(0,r.jsx)(n.p,{children:"Calculates the time-based decay of voting power as a lock approaches expiration."}),"\n",(0,r.jsx)("div",{className:"function-signature",children:(0,r.jsx)(n.p,{children:"function calculateBoost(uint256 veTokenBalance, uint256 totalVeSupply, uint256 userLpBalance, uint256 totalLpBalance) internal pure returns (uint256)"})}),"\n",(0,r.jsx)(n.p,{children:"Calculates the boost multiplier applied to rewards and other benefits."}),"\n",(0,r.jsx)(p,{}),"\n",(0,r.jsxs)(o.A,{children:[(0,r.jsxs)(s.A,{value:"voting",label:"Voting Power Formula",default:!0,children:[(0,r.jsx)("div",{className:"math-formula",children:(0,r.jsx)(n.p,{children:"votingPower = amount * lockDuration / maxLockDuration"})}),(0,r.jsx)("p",{children:"This formula linearly weights tokens based on lock duration, creating an incentive for longer-term commitment."})]}),(0,r.jsxs)(s.A,{value:"decay",label:"Decay Formula",children:[(0,r.jsx)("div",{className:"math-formula",children:(0,r.jsx)(n.p,{children:"currentPower = initialPower * (lockDuration - timeElapsed) / lockDuration"})}),(0,r.jsx)("p",{children:"As time progresses, voting power linearly decays until the lock expires."})]}),(0,r.jsxs)(s.A,{value:"boost",label:"Boost Formula",children:[(0,r.jsx)("div",{className:"math-formula",children:(0,r.jsx)(n.p,{children:"boost = min(2.5, 1 + 1.5 * (veBalance / totalVeSupply) / (lpBalance / totalLpBalance))"})}),(0,r.jsx)("p",{children:"The boost formula rewards users who lock a higher percentage of their LP tokens for longer periods."})]})]}),"\n",(0,r.jsx)(n.h2,{id:"integration-examples",children:"Integration Examples"}),"\n",(0,r.jsx)(n.h3,{id:"governance-voting-power",children:"Governance Voting Power"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:'// Import the library\nimport "../math/ve69LPMath.sol";\n\ncontract GovernanceVoting {\n    using ve69LPMath for uint256;\n    \n    // Constants\n    uint256 public constant MAX_LOCK_DURATION = 4 * 365 days; // 4 years\n    \n    // Calculate voting power for governance\n    function calculateVotePower(\n        address user, \n        uint256 tokenAmount, \n        uint256 lockDuration\n    ) external view returns (uint256) {\n        // Ensure lock duration is valid\n        require(lockDuration > 0 && lockDuration <= MAX_LOCK_DURATION, "Invalid lock duration");\n        \n        // Calculate voting power\n        return ve69LPMath.calculateVotingPower(\n            tokenAmount, \n            lockDuration, \n            MAX_LOCK_DURATION\n        );\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"reward-boost-calculation",children:"Reward Boost Calculation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:'// Import the library\nimport "../math/ve69LPMath.sol";\n\ncontract RewardDistributor {\n    using ve69LPMath for uint256;\n    \n    // Token contracts\n    IERC20 public lpToken;\n    IVe69LP public veToken;\n    \n    // Calculate user\'s boosted rewards\n    function calculateBoostedRewards(\n        address user,\n        uint256 baseReward\n    ) external view returns (uint256) {\n        // Get user LP and ve token balances\n        uint256 userLpBalance = lpToken.balanceOf(user);\n        uint256 userVeBalance = veToken.balanceOf(user);\n        \n        // Get total supplies\n        uint256 totalLpSupply = lpToken.totalSupply();\n        uint256 totalVeSupply = veToken.totalSupply();\n        \n        // Calculate boost multiplier\n        uint256 boostMultiplier = ve69LPMath.calculateBoost(\n            userVeBalance,\n            totalVeSupply,\n            userLpBalance,\n            totalLpSupply\n        );\n        \n        // Apply boost to base reward\n        return (baseReward * boostMultiplier) / 10000;\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"time-weighted-staking-model",children:"Time-Weighted Staking Model"}),"\n",(0,r.jsx)(n.p,{children:"The ve69LP system implements a time-weighted staking model that incentivizes long-term alignment:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Lock Duration"}),": Users lock LP tokens for up to 4 years"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Voting Power"}),": Proportional to amount locked and remaining lock time"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Linear Decay"}),": Voting power decreases linearly as lock expiration approaches"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Boost Mechanism"}),": Provides increased benefits proportional to lock commitment"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Governance Rights"}),": Weighted voting based on lock duration and amount"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"partner-probability-boost",children:"Partner Probability Boost"}),"\n",(0,r.jsx)(n.p,{children:"The ve69LP system includes a partner voting mechanism that allocates a 6.9% (690 basis points) probability boost among ecosystem partners:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Total Allocation"}),": A fixed 6.9% probability boost shared among all partners"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Voting Power"}),": ve69LP holders vote for partners using their voting power"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Proportional Distribution"}),": The 6.9% is distributed proportionally based on votes received"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Weekly Periods"}),": Voting occurs in 7-day periods with recalculation at period end"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Partner Registry"}),": Only registered and active partners can receive votes"]}),"\n"]}),"\n",(0,r.jsx)(h,{}),"\n",(0,r.jsx)(n.mermaid,{value:'flowchart TB\n    subgraph "Partner Boost System"\n        Votes["ve69LP Holder Votes"]\n        Calculation["Weekly Calculation"]\n        Distribution["Boost Distribution"]\n        Partners["Partner Registry"]\n    end\n    \n    subgraph "Applications"\n        ProbBoost["Probability Boost"]\n    end\n    \n    Votes --\x3e Calculation\n    Partners --\x3e Calculation\n    Calculation --\x3e Distribution\n    Distribution --\x3e ProbBoost\n    \n    classDef highlight fill:#f96,stroke:#333,stroke-width:2px;\n    class Distribution highlight;'}),"\n",(0,r.jsxs)("div",{className:"security-consideration",children:[(0,r.jsx)("h4",{children:"Security Considerations"}),(0,r.jsx)("p",{children:"When implementing ve token mathematics, consider these security best practices:"}),(0,r.jsxs)("ul",{children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Overflow Protection"}),": All calculations use Solidity 0.8+ built-in checks"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Rounding Behavior"}),": All rounding should favor the protocol to prevent exploitation"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Checkpoint System"}),": Use a checkpoint system for tracking historical balances"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Lock Extension"}),": Allow users to extend lock duration but not reduce it"]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Fee Control"}),": Ensure boost calculations cannot manipulate fee distribution unfairly"]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"gas-optimization",children:"Gas Optimization"}),"\n",(0,r.jsxs)("div",{className:"gas-optimization",children:[(0,r.jsx)("h4",{children:"Gas Optimization Notes"}),(0,r.jsx)("p",{children:"The ve69LPMath library implements several gas optimizations:"}),(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"Precalculated constants for common time values"}),(0,r.jsx)("li",{children:"Efficient balance tracking using a checkpoint system"}),(0,r.jsx)("li",{children:"Optimized boost calculation with fixed-point arithmetic"}),(0,r.jsx)("li",{children:"Memory-efficient storage for lock data"}),(0,r.jsx)("li",{children:"Balance caching to minimize external calls"})]})]})]})}function f(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>s});var a=t(6540);const r={},i=a.createContext(r);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(i.Provider,{value:n},e.children)}},9329:(e,n,t)=>{t.d(n,{A:()=>o});t(6540);var a=t(4164);const r={tabItem:"tabItem_Ymn6"};var i=t(4848);function o({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,t),hidden:n,children:e})}}}]);