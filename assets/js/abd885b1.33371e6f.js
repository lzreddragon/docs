"use strict";(self.webpackChunksonic_red_dragon_docs=self.webpackChunksonic_red_dragon_docs||[]).push([[7228],{3841:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"ecosystem/layerzero/integration","title":"LayerZero Integration Guide","description":"This guide explains how to integrate Sonic Red Dragon\'s LayerZero V2 functionality into your project.","source":"@site/docs/ecosystem/layerzero/integration.md","sourceDirName":"ecosystem/layerzero","slug":"/ecosystem/layerzero/integration","permalink":"/ecosystem/layerzero/integration","draft":false,"unlisted":false,"editUrl":"https://github.com/wenakita/sonicreddragon-docs/edit/main/docs/ecosystem/layerzero/integration.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2}}');var r=s(4848),t=s(8453);const a={sidebar_position:2},o="LayerZero Integration Guide",l={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2},{value:"Basic Integration",id:"basic-integration",level:2},{value:"Advanced Features",id:"advanced-features",level:2},{value:"Message Verification",id:"message-verification",level:3},{value:"Gas Management",id:"gas-management",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Support",id:"support",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"layerzero-integration-guide",children:"LayerZero Integration Guide"})}),"\n",(0,r.jsx)(e.p,{children:"This guide explains how to integrate Sonic Red Dragon's LayerZero V2 functionality into your project."}),"\n",(0,r.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(e.p,{children:"Before you begin, make sure you have:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Basic understanding of LayerZero V2"}),"\n",(0,r.jsx)(e.li,{children:"Access to supported networks"}),"\n",(0,r.jsx)(e.li,{children:"Development environment set up"}),"\n",(0,r.jsx)(e.li,{children:"Required dependencies installed"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Install the required dependencies:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"npm install @layerzerolabs/lz-v2-contracts @sonicreddragon/contracts\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:"Import the contracts:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-solidity",children:'import "@layerzerolabs/lz-v2-contracts/interfaces/ILayerZeroEndpointV2.sol";\nimport "@sonicreddragon/contracts/SonicRedDragonToken.sol";\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"basic-integration",children:"Basic Integration"}),"\n",(0,r.jsx)(e.p,{children:"Here's a simple example of how to integrate cross-chain functionality:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-solidity",children:'// SPDX-License-Identifier: MIT\npragma solidity ^0.8.0;\n\nimport "@layerzerolabs/lz-v2-contracts/interfaces/ILayerZeroEndpointV2.sol";\nimport "@sonicreddragon/contracts/SonicRedDragonToken.sol";\n\ncontract MyCrossChainApp {\n    ILayerZeroEndpointV2 public endpoint;\n    SonicRedDragonToken public token;\n\n    constructor(address _endpoint, address _token) {\n        endpoint = ILayerZeroEndpointV2(_endpoint);\n        token = SonicRedDragonToken(_token);\n    }\n\n    // Send tokens to another chain\n    function sendTokensCrossChain(\n        uint16 _dstChainId,\n        bytes calldata _destination,\n        uint256 _amount\n    ) external payable {\n        // Encode the payload\n        bytes memory payload = abi.encode(_amount, msg.sender);\n\n        // Send the message\n        endpoint.send{value: msg.value}(\n            _dstChainId,\n            _destination,\n            payload,\n            payable(msg.sender),\n            address(0),\n            ""\n        );\n    }\n\n    // Receive tokens from another chain\n    function lzReceive(\n        uint16 _srcChainId,\n        bytes calldata _srcAddress,\n        uint64 _nonce,\n        bytes calldata _payload\n    ) external {\n        require(msg.sender == address(endpoint), "Not from endpoint");\n\n        // Decode the payload\n        (uint256 amount, address recipient) = abi.decode(_payload, (uint256, address));\n\n        // Process the received tokens\n        // ... implementation details ...\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,r.jsx)(e.h3,{id:"message-verification",children:"Message Verification"}),"\n",(0,r.jsx)(e.p,{children:"Always verify message sources:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-solidity",children:'function lzReceive(\n    uint16 _srcChainId,\n    bytes calldata _srcAddress,\n    uint64 _nonce,\n    bytes calldata _payload\n) external {\n    require(msg.sender == address(endpoint), "Not from endpoint");\n    require(_srcAddress.length == 20, "Invalid source address");\n    \n    // Verify the sender is authorized\n    address srcAddress = address(uint160(bytes20(_srcAddress)));\n    require(isAuthorizedSender(srcAddress), "Unauthorized sender");\n    \n    // Process the message\n    // ... implementation details ...\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"gas-management",children:"Gas Management"}),"\n",(0,r.jsx)(e.p,{children:"Optimize gas costs for cross-chain operations:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-solidity",children:'function estimateGas(\n    uint16 _dstChainId,\n    bytes calldata _destination,\n    bytes calldata _payload\n) external view returns (uint256) {\n    return endpoint.estimateFees(\n        _dstChainId,\n        _destination,\n        _payload,\n        false,\n        ""\n    );\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(e.p,{children:"Implement proper error handling:"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-solidity",children:'function sendTokensCrossChain(\n    uint16 _dstChainId,\n    bytes calldata _destination,\n    uint256 _amount\n) external payable {\n    try endpoint.send{value: msg.value}(\n        _dstChainId,\n        _destination,\n        abi.encode(_amount, msg.sender),\n        payable(msg.sender),\n        address(0),\n        ""\n    ) {\n        emit CrossChainTransferInitiated(_dstChainId, _amount, msg.sender);\n    } catch Error(string memory reason) {\n        emit CrossChainTransferFailed(_dstChainId, _amount, reason);\n        revert(reason);\n    } catch {\n        emit CrossChainTransferFailed(_dstChainId, _amount, "Unknown error");\n        revert("Cross-chain transfer failed");\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Security"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Always verify message sources"}),"\n",(0,r.jsx)(e.li,{children:"Implement replay protection"}),"\n",(0,r.jsx)(e.li,{children:"Use appropriate access controls"}),"\n",(0,r.jsx)(e.li,{children:"Monitor cross-chain operations"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Gas Optimization"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Batch operations when possible"}),"\n",(0,r.jsx)(e.li,{children:"Use appropriate gas limits"}),"\n",(0,r.jsx)(e.li,{children:"Monitor gas costs"}),"\n",(0,r.jsx)(e.li,{children:"Implement fallback mechanisms"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Error Handling"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Implement proper error handling"}),"\n",(0,r.jsx)(e.li,{children:"Use try-catch blocks"}),"\n",(0,r.jsx)(e.li,{children:"Emit appropriate events"}),"\n",(0,r.jsx)(e.li,{children:"Monitor failed transactions"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Testing"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Test cross-chain scenarios"}),"\n",(0,r.jsx)(e.li,{children:"Use testnets for development"}),"\n",(0,r.jsx)(e.li,{children:"Monitor message delivery"}),"\n",(0,r.jsx)(e.li,{children:"Verify state consistency"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(e.p,{children:"Common issues and solutions:"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Message Not Delivered"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Check gas limits"}),"\n",(0,r.jsx)(e.li,{children:"Verify destination address"}),"\n",(0,r.jsx)(e.li,{children:"Ensure sufficient native token balance"}),"\n",(0,r.jsx)(e.li,{children:"Check network status"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"High Gas Costs"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Optimize payload size"}),"\n",(0,r.jsx)(e.li,{children:"Use appropriate gas limits"}),"\n",(0,r.jsx)(e.li,{children:"Consider batching operations"}),"\n",(0,r.jsx)(e.li,{children:"Monitor gas prices"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"State Inconsistency"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"Implement proper verification"}),"\n",(0,r.jsx)(e.li,{children:"Use appropriate timeouts"}),"\n",(0,r.jsx)(e.li,{children:"Monitor cross-chain state"}),"\n",(0,r.jsx)(e.li,{children:"Implement recovery mechanisms"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"support",children:"Support"}),"\n",(0,r.jsx)(e.p,{children:"For technical support or questions about LayerZero integration:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Join our ",(0,r.jsx)(e.a,{href:"https://discord.gg/sonicreddragon",children:"Discord"})]}),"\n",(0,r.jsxs)(e.li,{children:["Open an issue on ",(0,r.jsx)(e.a,{href:"https://github.com/wenakita/omnidragon",children:"GitHub"})]}),"\n",(0,r.jsxs)(e.li,{children:["Contact us at ",(0,r.jsx)(e.a,{href:"mailto:support@sonicreddragon.io",children:"support@sonicreddragon.io"})]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["Review the ",(0,r.jsx)(e.a,{href:"/ecosystem/layerzero/overview",children:"LayerZero Overview"})]}),"\n",(0,r.jsxs)(e.li,{children:["Check out our ",(0,r.jsx)(e.a,{href:"https://github.com/wenakita/omnidragon-examples",children:"Example Projects"})]}),"\n",(0,r.jsxs)(e.li,{children:["Join our ",(0,r.jsx)(e.a,{href:"https://discord.gg/sonicreddragon",children:"Discord Community"})]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function a(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);