"use strict";(self.webpackChunksonic_red_dragon_docs=self.webpackChunksonic_red_dragon_docs||[]).push([[1902],{4602:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"smart-contracts/bridge","title":"Sonic Red Dragon Bridge","description":"This document provides technical details about the Sonic Red Dragon bridge contract implementation, which handles cross-chain token transfers and message passing.","source":"@site/docs/smart-contracts/bridge.md","sourceDirName":"smart-contracts","slug":"/smart-contracts/bridge","permalink":"/smart-contracts/bridge","draft":false,"unlisted":false,"editUrl":"https://github.com/wenakita/sonicreddragon-docs/edit/main/docs/smart-contracts/bridge.md","tags":[],"version":"current","frontMatter":{}}');var r=i(4848),s=i(8453);const a={},l="Sonic Red Dragon Bridge",d={},o=[{value:"Contract Overview",id:"contract-overview",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Contract Interfaces",id:"contract-interfaces",level:2},{value:"ILayerZeroV2Bridge",id:"ilayerzerov2bridge",level:3},{value:"ISonicRedDragonBridge",id:"isonicreddragonbridge",level:3},{value:"Constructor Parameters",id:"constructor-parameters",level:2},{value:"Main Functions",id:"main-functions",level:2},{value:"Bridge Functions",id:"bridge-functions",level:3},{value:"Security Functions",id:"security-functions",level:3},{value:"View Functions",id:"view-functions",level:3},{value:"Events",id:"events",level:2},{value:"Security Features",id:"security-features",level:2},{value:"Access Control",id:"access-control",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"Message Validation",id:"message-validation",level:3},{value:"Gas Optimization",id:"gas-optimization",level:3},{value:"Cross-Chain Implementation",id:"cross-chain-implementation",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Development",id:"development",level:2},{value:"Contract Verification",id:"contract-verification",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sonic-red-dragon-bridge",children:"Sonic Red Dragon Bridge"})}),"\n",(0,r.jsx)(n.p,{children:"This document provides technical details about the Sonic Red Dragon bridge contract implementation, which handles cross-chain token transfers and message passing."}),"\n",(0,r.jsx)(n.h2,{id:"contract-overview",children:"Contract Overview"}),"\n",(0,r.jsx)(n.p,{children:"The Sonic Red Dragon bridge contract is built on LayerZero V2, providing secure and efficient cross-chain token transfers with enhanced security features and gas optimization."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Contract Address (Ethereum)"}),": Coming Soon"]}),"\n",(0,r.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"LayerZero V2 integration"}),"\n",(0,r.jsx)(n.li,{children:"Secure token bridging"}),"\n",(0,r.jsx)(n.li,{children:"Message validation"}),"\n",(0,r.jsx)(n.li,{children:"Gas optimization"}),"\n",(0,r.jsx)(n.li,{children:"Role-based access control"}),"\n",(0,r.jsx)(n.li,{children:"Rate limiting"}),"\n",(0,r.jsx)(n.li,{children:"Emergency controls"}),"\n",(0,r.jsx)(n.li,{children:"Cross-chain state management"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"contract-interfaces",children:"Contract Interfaces"}),"\n",(0,r.jsx)(n.h3,{id:"ilayerzerov2bridge",children:"ILayerZeroV2Bridge"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"interface ILayerZeroV2Bridge {\n    function bridgeTokens(\n        uint16 _dstChainId,\n        bytes calldata _destination,\n        uint256 _amount,\n        bytes calldata _payload\n    ) external payable;\n\n    function receiveTokens(\n        uint16 _srcChainId,\n        bytes calldata _srcAddress,\n        uint64 _nonce,\n        bytes calldata _payload\n    ) external;\n\n    function estimateBridgeFee(\n        uint16 _dstChainId,\n        bytes calldata _destination,\n        uint256 _amount,\n        bytes calldata _payload\n    ) external view returns (uint256 nativeFee, uint256 zroFee);\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"isonicreddragonbridge",children:"ISonicRedDragonBridge"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"interface ISonicRedDragonBridge {\n    function setTrustedRemote(uint16 _remoteChainId, bytes calldata _path) external;\n    function isTrustedRemote(uint16 _remoteChainId, bytes calldata _path) external view returns (bool);\n    function setMaxDailyVolume(uint256 _maxVolume) external;\n    function setMaxTransactionAmount(uint256 _maxAmount) external;\n    function pause() external;\n    function unpause() external;\n    function isPaused() external view returns (bool);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"constructor-parameters",children:"Constructor Parameters"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"constructor(\n    address _token,\n    address _lzEndpoint,\n    address _securityManager\n)\n"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Parameter"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"_token"}),(0,r.jsx)(n.td,{children:"address"}),(0,r.jsx)(n.td,{children:"Sonic Red Dragon token address"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"_lzEndpoint"}),(0,r.jsx)(n.td,{children:"address"}),(0,r.jsx)(n.td,{children:"LayerZero V2 endpoint"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"_securityManager"}),(0,r.jsx)(n.td,{children:"address"}),(0,r.jsx)(n.td,{children:"Security manager contract"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"main-functions",children:"Main Functions"}),"\n",(0,r.jsx)(n.h3,{id:"bridge-functions",children:"Bridge Functions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function bridgeTokens(\n    uint16 _dstChainId,\n    bytes calldata _destination,\n    uint256 _amount,\n    bytes calldata _payload\n) external payable\n"})}),"\n",(0,r.jsx)(n.p,{children:"Handles outbound token transfers to other chains."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function receiveTokens(\n    uint16 _srcChainId,\n    bytes calldata _srcAddress,\n    uint64 _nonce,\n    bytes calldata _payload\n) external\n"})}),"\n",(0,r.jsx)(n.p,{children:"Handles inbound token transfers from other chains."}),"\n",(0,r.jsx)(n.h3,{id:"security-functions",children:"Security Functions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function setTrustedRemote(uint16 _remoteChainId, bytes calldata _path) external onlyRole(ADMIN_ROLE)\nfunction setMaxDailyVolume(uint256 _maxVolume) external onlyRole(ADMIN_ROLE)\nfunction setMaxTransactionAmount(uint256 _maxAmount) external onlyRole(ADMIN_ROLE)\nfunction pause() external onlyRole(PAUSER_ROLE)\nfunction unpause() external onlyRole(PAUSER_ROLE)\n"})}),"\n",(0,r.jsx)(n.h3,{id:"view-functions",children:"View Functions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"function isTrustedRemote(uint16 _remoteChainId, bytes calldata _path) external view returns (bool)\nfunction getDailyVolume() external view returns (uint256)\nfunction getMaxDailyVolume() external view returns (uint256)\nfunction getMaxTransactionAmount() external view returns (uint256)\n"})}),"\n",(0,r.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"event TokensBridged(\n    uint16 indexed dstChainId,\n    bytes indexed destination,\n    uint256 amount,\n    bytes payload\n);\nevent TokensReceived(\n    uint16 indexed srcChainId,\n    bytes indexed srcAddress,\n    uint256 amount,\n    bytes payload\n);\nevent TrustedRemoteSet(uint16 indexed remoteChainId, bytes path);\nevent MaxDailyVolumeUpdated(uint256 newMaxVolume);\nevent MaxTransactionAmountUpdated(uint256 newMaxAmount);\nevent BridgePaused(address indexed pauser);\nevent BridgeUnpaused(address indexed unpauser);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"security-features",children:"Security Features"}),"\n",(0,r.jsx)(n.p,{children:"The bridge contract implements multiple security layers:"}),"\n",(0,r.jsx)(n.h3,{id:"access-control",children:"Access Control"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Role-based permissions for administrative functions"}),"\n",(0,r.jsx)(n.li,{children:"Trusted remote contract validation"}),"\n",(0,r.jsx)(n.li,{children:"Pausable functionality for emergencies"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Maximum daily volume limits"}),"\n",(0,r.jsx)(n.li,{children:"Per-transaction amount limits"}),"\n",(0,r.jsx)(n.li,{children:"Cross-chain message rate limiting"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"message-validation",children:"Message Validation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Source chain validation"}),"\n",(0,r.jsx)(n.li,{children:"Trusted remote validation"}),"\n",(0,r.jsx)(n.li,{children:"Payload validation"}),"\n",(0,r.jsx)(n.li,{children:"Nonce validation"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"gas-optimization",children:"Gas Optimization"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Optimized message payloads"}),"\n",(0,r.jsx)(n.li,{children:"Efficient state management"}),"\n",(0,r.jsx)(n.li,{children:"Gas refund mechanisms"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"cross-chain-implementation",children:"Cross-Chain Implementation"}),"\n",(0,r.jsx)(n.p,{children:"The bridge contract integrates with LayerZero V2:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"contract SonicRedDragonBridge is ILayerZeroV2Bridge, AccessControl, Pausable {\n    // Contract implementation\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:"This enables:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Secure cross-chain token transfers"}),"\n",(0,r.jsx)(n.li,{children:"Message validation and verification"}),"\n",(0,r.jsx)(n.li,{children:"Gas-optimized operations"}),"\n",(0,r.jsx)(n.li,{children:"State synchronization"}),"\n",(0,r.jsx)(n.li,{children:"Emergency controls"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,r.jsx)(n.p,{children:"The contract implements robust error handling:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Validation Errors"}),": Invalid parameters or states"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Security Errors"}),": Unauthorized access attempts"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Rate Limit Errors"}),": Exceeded volume or transaction limits"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cross-Chain Errors"}),": Failed message delivery or validation"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Recovery Mechanisms"}),": Administrative recovery options"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"development",children:"Development"}),"\n",(0,r.jsx)(n.p,{children:"For developers looking to interact with the bridge:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Install dependencies:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install @sonicreddragon/contracts\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Import the contract:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:'import "@sonicreddragon/contracts/SonicRedDragonBridge.sol";\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Example usage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-solidity",children:"// Bridge tokens to another chain\nawait bridge.bridgeTokens(\n    dstChainId,\n    destination,\n    amount,\n    payload\n);\n\n// Check bridge status\nconst isPaused = await bridge.isPaused();\nconst maxVolume = await bridge.getMaxDailyVolume();\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"contract-verification",children:"Contract Verification"}),"\n",(0,r.jsx)(n.p,{children:"The bridge contract source code will be verified on all deployed chain explorers:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Ethereum Explorer (Coming Soon)"}),"\n",(0,r.jsx)(n.li,{children:"Arbitrum Explorer (Coming Soon)"}),"\n",(0,r.jsx)(n.li,{children:"Optimism Explorer (Coming Soon)"}),"\n",(0,r.jsx)(n.li,{children:"Base Explorer (Coming Soon)"}),"\n",(0,r.jsx)(n.li,{children:"Polygon Explorer (Coming Soon)"}),"\n",(0,r.jsx)(n.li,{children:"Avalanche Explorer (Coming Soon)"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var t=i(6540);const r={},s=t.createContext(r);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);