<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-ecosystem/drand-network" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Drand Network Integration | Sonic Red Dragon</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.sonicreddragon.io/img/logo.svg"><meta data-rh="true" name="twitter:image" content="https://docs.sonicreddragon.io/img/logo.svg"><meta data-rh="true" property="og:url" content="https://docs.sonicreddragon.io/ecosystem/drand-network"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Drand Network Integration | Sonic Red Dragon"><meta data-rh="true" name="description" content="This documentation explains the integration of the drand randomness beacon network with the OmniDragon ecosystem."><meta data-rh="true" property="og:description" content="This documentation explains the integration of the drand randomness beacon network with the OmniDragon ecosystem."><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://docs.sonicreddragon.io/ecosystem/drand-network"><link data-rh="true" rel="alternate" href="https://docs.sonicreddragon.io/ecosystem/drand-network" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.sonicreddragon.io/ecosystem/drand-network" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d81d7c34.css">
<script src="/assets/js/runtime~main.36920e0d.js" defer="defer"></script>
<script src="/assets/js/main.3657ce2a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Sonic Red Dragon Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Sonic Red Dragon Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Sonic Red Dragon</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/intro">Overview</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/contracts/overview">Contracts</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ecosystem/drand-network">Randomness</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/wenakita/omnidragon" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/intro">Introduction to OmniDragon</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/contracts/overview">Contracts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ecosystem/drand-network">Randomness</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ecosystem/drand-network">Drand Network Integration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tutorial-basics/create-a-document">Tutorial Basics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/tutorial-extras/manage-docs-versions">Tutorial Extras</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Randomness</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Drand Network Integration</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Drand Network Integration</h1></header>
<p>This documentation explains the integration of the drand randomness beacon network with the OmniDragon ecosystem.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-drand">What is drand?<a href="#what-is-drand" class="hash-link" aria-label="Direct link to What is drand?" title="Direct link to What is drand?">​</a></h2>
<p>drand is a distributed randomness beacon that provides publicly verifiable, unpredictable and unbiasable random values at regular intervals. The randomness is generated in a distributed way by a set of nodes and is available for free to anyone.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-networks">Supported Networks<a href="#supported-networks" class="hash-link" aria-label="Direct link to Supported Networks" title="Direct link to Supported Networks">​</a></h2>
<p>The OmniDragon system currently supports the following drand networks:</p>
<ol>
<li>
<p><strong>League of Entropy Mainnet</strong></p>
<ul>
<li>Chain Hash: <code>8990e7a9aaed2ffed73dbd7092123d6f289930540d7651336225dc172e51b2ce</code></li>
<li>Period: 30 seconds</li>
<li>Public Key: <code>868f005eb8e6e4ca0a47c8a77ceaa5309a47978a7c71bc5cce96366b5d7a569937c529eeda66c7293784a9402801af31</code></li>
</ul>
</li>
<li>
<p><strong>Quicknet</strong></p>
<ul>
<li>Chain Hash: <code>52db9ba70e0cc0f6eaf7803dd07447a1f5477735fd3f661792ba94600c84e971</code></li>
<li>Period: 3 seconds</li>
<li>Public Key: <code>83cf0f2896adee7eb8b5f01fcad3912212c437e0073e911fb90022d3e760183c8c4b450b6a0a6c3ac6a5776a2d1064510d1fec758c921cc22b0e17e63aaf4bcb5ed66304de9cf809bd274ca73bab4af5a6e9c76a4bc09e76eae8991ef5ece45a</code></li>
</ul>
</li>
<li>
<p><strong>EVMnet</strong></p>
<ul>
<li>Chain Hash: <code>04f1e9062b8a81f848fded9c12306733282b2727ecced50032187751166ec8c3</code></li>
<li>Period: 3 seconds</li>
<li>Public Key: <code>07e1d1d335df83fa98462005690372c643340060d205306a9aa8106b6bd0b3820557ec32c2ad488e4d4f6008f89a346f18492092ccc0d594610de2732c8b808f0095685ae3a85ba243747b1b2f426049010f6b73a0cf1d389351d5aaaa1047f6297d3a4f9749b33eb2d904c9d9ebf17224150ddd7abd7567a9bec6c74480ee0b</code></li>
<li>Blockchain Optimized: Uses BLS-BN254 cryptographic curve which has native support in Ethereum and other EVM chains, resulting in lower gas costs for on-chain verification</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="multi-source-randomness-aggregation">Multi-Source Randomness Aggregation<a href="#multi-source-randomness-aggregation" class="hash-link" aria-label="Direct link to Multi-Source Randomness Aggregation" title="Direct link to Multi-Source Randomness Aggregation">​</a></h2>
<p>OmniDragon uses a unique multi-source randomness approach to enhance security and reliability:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-architecture">System Architecture<a href="#system-architecture" class="hash-link" aria-label="Direct link to System Architecture" title="Direct link to System Architecture">​</a></h3>
<p><a href="https://mermaid.live/edit#pako:eNqdVmtv4jgU_SuWK8SORLskTihEq5Fa-lAlpjttR_0ww34wyU1ikdiR40zLVPz3vU4KBDpTUbAUfHzPub4Pxc4LDVUENKCdzstUEiKkMAGpp4R0TQo5dAPSnfESur326iPXgs8yKLtrOppiJc2D-FVrnEHxvNKgqdAi53oxVpnS1nwU17-3jG_wbDYs17HjLetc6Qj0hnd-YUeLlwkJG_Po0o6W2YA2YiueK9-ObsNYrpKNM_UUplybrTxTk2cTPoPMpm90BRvHYaV_rmomytaOEgv9UPBQyATNp_2NRXM531gG_dcQ7B8-lp3OVNqxDoV8O28oZTVLNC9SMqX3XEYql1CW5EFVOoRySlcbEDJRlz-mdAI8qYComFxKo1Wx-Gem__7M-iX5ClqoaEr_20jublFxV4lwLsE0xN_yLh-_IBGf79PGE2SNUy4kNmZOHu-v1maQUTN5k9SNNIBzI5QkE74A3c7pxkGPF5onSqK3FVXpOoi_MONPWwHcuO_RV4nuaNh7mibnHYXXTnNLtEe-Z0miIflDvmfX1-j731yKdURjJcsqh9d4XL9DnkAkqSHAw_TTHhuuHLzdbWyre81zIMgxmoem3O6nLeeVkFyGgmfkrCgyEdaR7_BsCa_VT9CWCuRhURrIyz_Fhm0jx8efsbkNvrttoNtALHmDWYPHkwZ6bR83Tr2I9XrF7g5mO9jbxs0TYb08dnawu4OZfTfruppFBnUGsciy4CgeRT74vRJftTkER4yx1_nxk4hMGjjFc1uIqR6kszU5SIjF-6CurcYqN2qof3vvit04TMcO1Hkf1bXVtsuNPBrGQ3A-KB-vijRj0I_j_VvjHqhj--tojyZaRDSIeVZCj-IxkHOLaX3PTWl9z09pgNOI67k9HZYoKrj8rlROg_reo1pVSbp2UhURN3AhOJ4w-XpV41tuL-tKGhq4rlM7ocELfaaBM3JP3IE_8J2hw5jnDAY9ukCW1z9hzqjPRj479YanPlv26K963_7J0D31-95g5HkDZ-i6Xo9CJPCI_dJ8y9SfNMv_AaBxqwM" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://mermaid.ink/img/pako:eNqdVmtv4jgU_SuWK8SORLskTihEq5Fa-lAlpjttR_0ww34wyU1ikdiR40zLVPz3vU4KBDpTUbAUfHzPub4Pxc4LDVUENKCdzstUEiKkMAGpp4R0TQo5dAPSnfESur326iPXgs8yKLtrOppiJc2D-FVrnEHxvNKgqdAi53oxVpnS1nwU17-3jG_wbDYs17HjLetc6Qj0hnd-YUeLlwkJG_Po0o6W2YA2YiueK9-ObsNYrpKNM_UUplybrTxTk2cTPoPMpm90BRvHYaV_rmomytaOEgv9UPBQyATNp_2NRXM531gG_dcQ7B8-lp3OVNqxDoV8O28oZTVLNC9SMqX3XEYql1CW5EFVOoRySlcbEDJRlz-mdAI8qYComFxKo1Wx-Gem__7M-iX5ClqoaEr_20jublFxV4lwLsE0xN_yLh-_IBGf79PGE2SNUy4kNmZOHu-v1maQUTN5k9SNNIBzI5QkE74A3c7pxkGPF5onSqK3FVXpOoi_MONPWwHcuO_RV4nuaNh7mibnHYXXTnNLtEe-Z0miIflDvmfX1-j731yKdURjJcsqh9d4XL9DnkAkqSHAw_TTHhuuHLzdbWyre81zIMgxmoem3O6nLeeVkFyGgmfkrCgyEdaR7_BsCa_VT9CWCuRhURrIyz_Fhm0jx8efsbkNvrttoNtALHmDWYPHkwZ6bR83Tr2I9XrF7g5mO9jbxs0TYb08dnawu4OZfTfruppFBnUGsciy4CgeRT74vRJftTkER4yx1_nxk4hMGjjFc1uIqR6kszU5SIjF-6CurcYqN2qof3vvit04TMcO1Hkf1bXVtsuNPBrGQ3A-KB-vijRj0I_j_VvjHqhj--tojyZaRDSIeVZCj-IxkHOLaX3PTWl9z09pgNOI67k9HZYoKrj8rlROg_reo1pVSbp2UhURN3AhOJ4w-XpV41tuL-tKGhq4rlM7ocELfaaBM3JP3IE_8J2hw5jnDAY9ukCW1z9hzqjPRj479YanPlv26K963_7J0D31-95g5HkDZ-i6Xo9CJPCI_dJ8y9SfNMv_AaBxqwM" alt="" class="img_ev3q"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="omnidragonvrfconsumer">OmniDragonVRFConsumer<a href="#omnidragonvrfconsumer" class="hash-link" aria-label="Direct link to OmniDragonVRFConsumer" title="Direct link to OmniDragonVRFConsumer">​</a></h3>
<p>The <code>OmniDragonVRFConsumer</code> contract is the cornerstone of our randomness infrastructure. It:</p>
<ol>
<li><strong>Aggregates Multiple Sources</strong>: Combines randomness from all supported drand networks plus Chainlink VRF</li>
<li><strong>Weighted Aggregation</strong>: Assigns configurable weights to each source (default is 25% per source)</li>
<li><strong>Fault Tolerance</strong>: Continues to function even if one or more sources are temporarily unavailable</li>
<li><strong>Verifiable</strong>: All randomness is cryptographically verifiable</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="randomness-buffer-design">Randomness Buffer Design<a href="#randomness-buffer-design" class="hash-link" aria-label="Direct link to Randomness Buffer Design" title="Direct link to Randomness Buffer Design">​</a></h3>
<p>A key security feature of OmniDragonVRFConsumer is the randomness buffer system:</p>
<p><a href="https://mermaid.live/edit#pako:eNqdVmuPojAU_StNJ8bZRF2h-IBsJplhnGQT3A3rrB923Q8VijZiIaXM6Ez871tAEFAyD5sgnnPu7bm1vekrdAKXQAO2Wq8LBgBlVBggfQWgLdZkS9oGaC9xRNqdMjrHnOKlT6J2IZeUFzAxoy9pjDIMd3mMpEJOt5jvzcAPeEJfeennXPFIduKkUpVknKvuAu4SftLd3SejpPMpIydanySjRAvCBa34eRgko50pDnmxnh88O2vMRaXOtdj6Fl4SPylf8JicEjsxf8rXjEalGZlc6FmIHcpWkh71TwzHbHNihv2jheRLPg6t1oIlY8VxuAaP9xkdxcsMWMDJfMqIAHex5xEOrpU-eMJ-TKIvC5jPAcBkrvxdwHlCAGUB_5UZtWDUGoMKBtUYTTK9Xq-GDk5z9AuKMDd7OXNux9TZvO3dbvRuN3q3G73bF73bH_VuEbyS2sADEyZ4EO7fKMJqLMJqLMJqLMK6WIT10SLMNaZMHpXNG-bNRvNmo3mz0bx50bz5LvPTyeOtlE2JwF15cNxgy0gUfVvyrzfXLpHHeisPfgQi4hNH0IB9KRJlz8l8JsNnKU1ccDw76ayF0q5qil1aVVlVlRVMagKzKjitdVWWPR--_7i1pPyBMuyD3yzkxKWOSHpsWtyvolbwMxZhLGrxybqAbvcmKbCG2GeIdYaYOZKvklJNJptEHUB1QKsDgyqQL65SdWUfU5cAVAe0OjCoAvk_olTLs46pSwCqA1odGFSB_L9UqutkHlOXAFQHtDowuLzWsxROd0CxAeuQdQ6Z59DxgIu9TzIYeNT3jStPH3Yi2aU2xLhCCB3fu8_UFWtDDXfluHRPZGGOTt4dlpSRRemO1xylVKPsT0VZn4oy3x0FO3DFqQsND_sR6cCtbCs4-Q3TO8ACpnegBTTkq4v5JmmVBxkUYvYnCLbQSO8EkAfxal0kiUMXC3JPsWy-2wLlsr8lF5mYCWioo0GaBBqvcAcNpT_sDZE2UocjHal9tS_ZPTSk495YH48VHY2Qjsbj4aEDX9J5-z2JaepIVzQNIU1XUAfKPiICPs3ueel17_AfL07Lhg" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://mermaid.ink/img/pako:eNqdVmuPojAU_StNJ8bZRF2h-IBsJplhnGQT3A3rrB923Q8VijZiIaXM6Ez871tAEFAyD5sgnnPu7bm1vekrdAKXQAO2Wq8LBgBlVBggfQWgLdZkS9oGaC9xRNqdMjrHnOKlT6J2IZeUFzAxoy9pjDIMd3mMpEJOt5jvzcAPeEJfeennXPFIduKkUpVknKvuAu4SftLd3SejpPMpIydanySjRAvCBa34eRgko50pDnmxnh88O2vMRaXOtdj6Fl4SPylf8JicEjsxf8rXjEalGZlc6FmIHcpWkh71TwzHbHNihv2jheRLPg6t1oIlY8VxuAaP9xkdxcsMWMDJfMqIAHex5xEOrpU-eMJ-TKIvC5jPAcBkrvxdwHlCAGUB_5UZtWDUGoMKBtUYTTK9Xq-GDk5z9AuKMDd7OXNux9TZvO3dbvRuN3q3G73bF73bH_VuEbyS2sADEyZ4EO7fKMJqLMJqLMJqLMK6WIT10SLMNaZMHpXNG-bNRvNmo3mz0bx50bz5LvPTyeOtlE2JwF15cNxgy0gUfVvyrzfXLpHHeisPfgQi4hNH0IB9KRJlz8l8JsNnKU1ccDw76ayF0q5qil1aVVlVlRVMagKzKjitdVWWPR--_7i1pPyBMuyD3yzkxKWOSHpsWtyvolbwMxZhLGrxybqAbvcmKbCG2GeIdYaYOZKvklJNJptEHUB1QKsDgyqQL65SdWUfU5cAVAe0OjCoAvk_olTLs46pSwCqA1odGFSB_L9UqutkHlOXAFQHtDowuLzWsxROd0CxAeuQdQ6Z59DxgIu9TzIYeNT3jStPH3Yi2aU2xLhCCB3fu8_UFWtDDXfluHRPZGGOTt4dlpSRRemO1xylVKPsT0VZn4oy3x0FO3DFqQsND_sR6cCtbCs4-Q3TO8ACpnegBTTkq4v5JmmVBxkUYvYnCLbQSO8EkAfxal0kiUMXC3JPsWy-2wLlsr8lF5mYCWioo0GaBBqvcAcNpT_sDZE2UocjHal9tS_ZPTSk495YH48VHY2Qjsbj4aEDX9J5-z2JaepIVzQNIU1XUAfKPiICPs3ueel17_AfL07Lhg?type=png" alt="" class="img_ev3q"></a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How It Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How It Works" title="Direct link to How It Works">​</a></h4>
<ol>
<li>
<p><strong>Buffering</strong>: Each randomness source (EVMnet, Quicknet, League of Entropy, Chainlink) maintains a buffer of the 10 most recent randomness values</p>
</li>
<li>
<p><strong>Unpredictable Selection</strong>: When randomness is requested:</p>
<ul>
<li>The system generates &quot;meta-randomness&quot; using a combination of block information and timestamp</li>
<li>This meta-randomness determines which value is selected from each buffer</li>
<li>The value selection process cannot be predicted in advance, even by block producers</li>
</ul>
</li>
<li>
<p><strong>Aggregation</strong>: After selecting values from each buffer, they are:</p>
<ul>
<li>Combined using a weighted function (25% contribution from each source)</li>
<li>Processed through a one-way hash function to create the final randomness value</li>
</ul>
</li>
<li>
<p><strong>Enhanced Unpredictability</strong>: This approach provides significantly stronger guarantees than using only the latest randomness values because:</p>
<ul>
<li>Even if an attacker knows all current buffer values, they cannot predict which will be selected</li>
<li>The selection mechanism depends on future block data, making front-running difficult</li>
<li>Each source has 10 possible values, creating 10^4 = 10,000 possible combinations</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="request-and-fulfillment-flow">Request and Fulfillment Flow<a href="#request-and-fulfillment-flow" class="hash-link" aria-label="Direct link to Request and Fulfillment Flow" title="Direct link to Request and Fulfillment Flow">​</a></h3>
<p>The following sequence diagram illustrates how randomness is requested and fulfilled:</p>
<p><a href="https://mermaid.live/edit#pako:eNqVlGtvmzAUhv-K5SlKJ9GOSyAJmir1KlVqu63t-mHKFwcOxArY7GCaXpT_PhsSoEsqbbGEwed5j49fx36jkYyBhnQweJsJQrjgKiT1KyFDtYAchiEZzlkJQ6s_-siQs3kG5bDFdSiRQt3z11rjBMXzVqNDBfKc4cuZzCSa8Kek_u0SD_CsOsp1TNulTiXGgB13em5aj8u4gC48vTCtF1aAir-r59I3bdgQ6-1ik0yuogVD9W6dC5Vn12wOmVm-wgq6xFGFT1vPeNmbUWij7wsWcZHq8NjuIsjEsosE9qYE0-nHejCYCdNK-F2BiOCcsxRZ3lCFLo1HvGBCkZOiIKw0XcYjprgU5ExvCLJI7cLfcsENbfpzZKkUj3eXGi-rHHAXvxLKMXiL6gHQZSiJ5OBaXnzeK3E_lFw83ghQ-1Xeh6ofFY-W-3V3kLGXjVDEm897wCcegXHP8NqZw-Njs-KQoHGzVHcalrmAsjzYJDXhQ41puKWu4iZ2KxUQ-QRImiQP2ttluaUapnnW8-ssxreQ3MKKYDsTSVDmRJu2g7r70casHdrbT29N6pdjymiX_rOImV6HRlYSlz19y7r_wXr_yu638CRNEVKj6_ivc_xyvOJqQVbA04V6l6Den832JFWW8CzrbWK7YVYv3-e_p67F31FGxrSOoxZNkcc0TFhWgkX1SciZ-ab10Z_R-uqb0VC_xgyXM6qPpxbpP-AvKXMa1lcBRVmlizZJVbuyObTtKIKo769KKBq6zrhOQsM3-kxDZ-oeuYEf-M7E8byREwQWfdHUyD7ynKntTX1vPJqMfW9t0dd6Xvto4o59exRMPN-x7bHtWhRirs_MTXO917f8-g_9H-Yq" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://mermaid.ink/img/pako:eNqVlGtvmzAUhv-K5SlKJ9GOSyAJmir1KlVqu63t-mHKFwcOxArY7GCaXpT_PhsSoEsqbbGEwed5j49fx36jkYyBhnQweJsJQrjgKiT1KyFDtYAchiEZzlkJQ6s_-siQs3kG5bDFdSiRQt3z11rjBMXzVqNDBfKc4cuZzCSa8Kek_u0SD_CsOsp1TNulTiXGgB13em5aj8u4gC48vTCtF1aAir-r59I3bdgQ6-1ik0yuogVD9W6dC5Vn12wOmVm-wgq6xFGFT1vPeNmbUWij7wsWcZHq8NjuIsjEsosE9qYE0-nHejCYCdNK-F2BiOCcsxRZ3lCFLo1HvGBCkZOiIKw0XcYjprgU5ExvCLJI7cLfcsENbfpzZKkUj3eXGi-rHHAXvxLKMXiL6gHQZSiJ5OBaXnzeK3E_lFw83ghQ-1Xeh6ofFY-W-3V3kLGXjVDEm897wCcegXHP8NqZw-Njs-KQoHGzVHcalrmAsjzYJDXhQ41puKWu4iZ2KxUQ-QRImiQP2ttluaUapnnW8-ssxreQ3MKKYDsTSVDmRJu2g7r70casHdrbT29N6pdjymiX_rOImV6HRlYSlz19y7r_wXr_yu638CRNEVKj6_ivc_xyvOJqQVbA04V6l6Den832JFWW8CzrbWK7YVYv3-e_p67F31FGxrSOoxZNkcc0TFhWgkX1SciZ-ab10Z_R-uqb0VC_xgyXM6qPpxbpP-AvKXMa1lcBRVmlizZJVbuyObTtKIKo769KKBq6zrhOQsM3-kxDZ-oeuYEf-M7E8byREwQWfdHUyD7ynKntTX1vPJqMfW9t0dd6Xvto4o59exRMPN-x7bHtWhRirs_MTXO917f8-g_9H-Yq" alt="" class="img_ev3q"></a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-of-multi-source-randomness">Benefits of Multi-Source Randomness<a href="#benefits-of-multi-source-randomness" class="hash-link" aria-label="Direct link to Benefits of Multi-Source Randomness" title="Direct link to Benefits of Multi-Source Randomness">​</a></h3>
<p>The security advantages of OmniDragon&#x27;s multi-source approach compared to traditional single-source solutions:</p>
<p><a href="https://mermaid.live/edit#pako:eNqdVUtv4jAQ_iuWK8QFUB48mhxWaqHspWi1BOWwSQ8mMcTCsSPH2UIr_vtOQiFhYbUIWyLDzPfNjGf8-MSRjCl2cav1GQqEmGDaRZWIUFsnNKVtF7WXJKftTlPrE8XIktO8fYKDaSWF9thHxTGH2fbIAVOmWErUbiy5VKX5YVWNS8SCbnWNssxyXqKepYqpqnHPk3I2cJwJWpudl3I2zJoqzc7ymQ7K2T4g9sfFrrh8jxKi9Nk6E53yV7KkvFy-VgWtHUeF-n2sGcsbEQUU2stIxMQazCOjtigiNrVlaHylUH7gZ99qhSIUa0WyBC0mB2NeLA-KEC8UiZlmUhCOnrJMSRIlIT46R8gzAw88c4rmRMQyFTTPkScLFdG3GuWbgV9wQRVZMs707q3pAHW7XUA00ZVqagYLqSGut8s1TdGUMF6oo1sq4oNwkfKPVLCJImsprmY8g5RfKVkXFMkVehFayayZ0Myzghd_Jqg-U9rBz4JFm7_V_WCcECZgP2wa-lp6-h7U-fjz6ViKvEipugqeVcX4BqSzdK7o7Cu6_oWuUVIrGMsUipGynMaXDaoi96AN1vVFVK7nwVwui1w3Wv2PZugdbAhwuWKcu3AWHRidHCq9oe6DbdtfcvedxTpxzWzb5Pk1L4JxM29a84YwbuA12bNTuo5TJnxz2LJBdxLte4n9-4i-dV9lof_HeGXEm3nzRpr_oeEOXisWY3dFeE47GI5ISsr_uLoXQ1y9CyF2QYyJ2pQneg-kjIhfUqbYre5JrGSxTk5Oiiwmmk4YgashPWkV7Nbyci-Exq5l2JUT7H7iLXbNx37v0XFMw-ybtmEPzFEH7wD1aPaswWjojAzDGcF3uO_gjyqu0RuBqj80DNscGI4N7cAUrkypZoe3r3oC938ALkUWmQ" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://mermaid.ink/img/pako:eNqdVUtv4jAQ_iuWK8QFUB48mhxWaqHspWi1BOWwSQ8mMcTCsSPH2UIr_vtOQiFhYbUIWyLDzPfNjGf8-MSRjCl2cav1GQqEmGDaRZWIUFsnNKVtF7WXJKftTlPrE8XIktO8fYKDaSWF9thHxTGH2fbIAVOmWErUbiy5VKX5YVWNS8SCbnWNssxyXqKepYqpqnHPk3I2cJwJWpudl3I2zJoqzc7ymQ7K2T4g9sfFrrh8jxKi9Nk6E53yV7KkvFy-VgWtHUeF-n2sGcsbEQUU2stIxMQazCOjtigiNrVlaHylUH7gZ99qhSIUa0WyBC0mB2NeLA-KEC8UiZlmUhCOnrJMSRIlIT46R8gzAw88c4rmRMQyFTTPkScLFdG3GuWbgV9wQRVZMs707q3pAHW7XUA00ZVqagYLqSGut8s1TdGUMF6oo1sq4oNwkfKPVLCJImsprmY8g5RfKVkXFMkVehFayayZ0Myzghd_Jqg-U9rBz4JFm7_V_WCcECZgP2wa-lp6-h7U-fjz6ViKvEipugqeVcX4BqSzdK7o7Cu6_oWuUVIrGMsUipGynMaXDaoi96AN1vVFVK7nwVwui1w3Wv2PZugdbAhwuWKcu3AWHRidHCq9oe6DbdtfcvedxTpxzWzb5Pk1L4JxM29a84YwbuA12bNTuo5TJnxz2LJBdxLte4n9-4i-dV9lof_HeGXEm3nzRpr_oeEOXisWY3dFeE47GI5ISsr_uLoXQ1y9CyF2QYyJ2pQneg-kjIhfUqbYre5JrGSxTk5Oiiwmmk4YgashPWkV7Nbyci-Exq5l2JUT7H7iLXbNx37v0XFMw-ybtmEPzFEH7wD1aPaswWjojAzDGcF3uO_gjyqu0RuBqj80DNscGI4N7cAUrkypZoe3r3oC938ALkUWmQ" alt="" class="img_ev3q"></a></p>
<p>Key benefits:</p>
<ul>
<li><strong>Enhanced Security</strong>: No single point of failure in randomness generation</li>
<li><strong>Manipulation Resistance</strong>: An attacker would need to compromise multiple independent networks</li>
<li><strong>Network Diversity</strong>: Different cryptographic schemes and node operators across networks</li>
<li><strong>Blockchain Compatibility</strong>: By including EVMnet, ensures efficient on-chain verification</li>
<li><strong>Unpredictable Source Selection</strong>: The buffering and selection mechanism adds another layer of security</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-architecture">Integration Architecture<a href="#integration-architecture" class="hash-link" aria-label="Direct link to Integration Architecture" title="Direct link to Integration Architecture">​</a></h2>
<p>The drand integration in OmniDragon follows a multi-layered architecture:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Drand Network  │────▶│ drand-relay-api │────▶│   Integration   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────┘     └─────────────────┘     └────────┬────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                         ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌─────────────────┐     ┌─────────────────┐     ┌─────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Applications   │◀────│   Consumers     │◀────│   Verifier      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────┘     └─────────────────┘     └─────────────────┘</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Components:</p>
<ol>
<li><strong>Integration Layer</strong>: Receives randomness from the relay and validates it</li>
<li><strong>Verifier</strong>: Verifies the signatures from drand</li>
<li><strong>Consumers</strong>: Smart contracts that need randomness</li>
<li><strong>Applications</strong>: Higher-level applications using randomness</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage-in-smart-contracts">Usage in Smart Contracts<a href="#usage-in-smart-contracts" class="hash-link" aria-label="Direct link to Usage in Smart Contracts" title="Direct link to Usage in Smart Contracts">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-usage-with-single-source">Basic Usage with Single Source<a href="#basic-usage-with-single-source" class="hash-link" aria-label="Direct link to Basic Usage with Single Source" title="Direct link to Basic Usage with Single Source">​</a></h3>
<p>To use drand randomness from a single source in a smart contract:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Import the DragonVRFConsumer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../drand/DragonVRFConsumer.sol&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">contract</span><span class="token plain"> </span><span class="token class-name">MyRandomApp</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">is</span><span class="token plain"> DragonVRFConsumer </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Request ID tracking</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint256</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> requestId</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">address</span><span class="token plain"> _vrfIntegrator</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">DragonVRFConsumer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_vrfIntegrator</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Request randomness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getRandomNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">external</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        requestId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">requestRandomness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Receive randomness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">_fulfillRandomness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint256</span><span class="token plain"> _requestId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint256</span><span class="token plain"> _randomness</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">internal</span><span class="token plain"> override </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Use randomness here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-usage-with-omnidragonvrfconsumer">Advanced Usage with OmniDragonVRFConsumer<a href="#advanced-usage-with-omnidragonvrfconsumer" class="hash-link" aria-label="Direct link to Advanced Usage with OmniDragonVRFConsumer" title="Direct link to Advanced Usage with OmniDragonVRFConsumer">​</a></h3>
<p>For applications requiring maximum security, use the OmniDragonVRFConsumer:</p>
<div class="language-solidity codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-solidity codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Import the OmniDragonVRFConsumer interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;../drand/interfaces/IOmniDragonVRFConsumer.sol&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">contract</span><span class="token plain"> </span><span class="token class-name">SecureRandomApp</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// OmniDragonVRFConsumer reference</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IOmniDragonVRFConsumer </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> omniConsumer</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Request tracking</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">mapping</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint256</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token builtin">bool</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> pendingRequests</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">uint256</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> lastRandomValue</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">event</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RandomnessRequested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint256</span><span class="token plain"> requestId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">event</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RandomnessReceived</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint256</span><span class="token plain"> requestId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint256</span><span class="token plain"> randomValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">address</span><span class="token plain"> _omniConsumer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        omniConsumer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">IOmniDragonVRFConsumer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_omniConsumer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Request aggregated randomness</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getSecureRandomNumber</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">external</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token builtin">uint256</span><span class="token plain"> requestId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> omniConsumer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">requestRandomness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pendingRequests</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">requestId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">emit</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RandomnessRequested</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">requestId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Callback function for randomness fulfillment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fulfillRandomness</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">uint256</span><span class="token plain"> _requestId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token builtin">uint256</span><span class="token plain"> _randomness</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">external</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">sender </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token builtin">address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">omniConsumer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Only OmniConsumer can fulfill&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pendingRequests</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">_requestId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Request not found&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lastRandomValue </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> _randomness</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">delete</span><span class="token plain"> pendingRequests</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">_requestId</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">emit</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RandomnessReceived</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_requestId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _randomness</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Use randomness here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-details">Implementation Details<a href="#implementation-details" class="hash-link" aria-label="Direct link to Implementation Details" title="Direct link to Implementation Details">​</a></h2>
<p>The drand integration uses the following components:</p>
<ol>
<li><code>DragonVRFIntegrator.sol</code> - Receives and distributes randomness from a single drand network</li>
<li><code>DragonVRFConsumer.sol</code> - Base contract for consuming randomness from a single source</li>
<li><code>OmniDragonVRFConsumer.sol</code> - Advanced consumer that aggregates randomness from multiple sources</li>
<li><code>drand-relay-verifier</code> - Service that verifies and relays drand randomness</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations">Security Considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations">​</a></h2>
<ul>
<li>Randomness is public and known to anyone once published</li>
<li>There is a small delay between randomness generation and availability</li>
<li>Consumers must protect against front-running attacks</li>
<li>Using multiple sources (as OmniDragonVRFConsumer does) significantly enhances security</li>
<li>Even with multiple sources, randomness should not be used for high-value secret generation without additional safeguards</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-reading">Further Reading<a href="#further-reading" class="hash-link" aria-label="Direct link to Further Reading" title="Direct link to Further Reading">​</a></h2>
<ul>
<li><a href="https://leagueofentropy.com/" target="_blank" rel="noopener noreferrer">League of Entropy</a></li>
<li><a href="https://drand.love/docs/" target="_blank" rel="noopener noreferrer">drand Documentation</a></li>
<li><a href="https://docs.chain.link/docs/chainlink-vrf/" target="_blank" rel="noopener noreferrer">Randomness in Smart Contracts</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/wenakita/sonicreddragon-docs/edit/main/docs/ecosystem/drand-network.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/contracts/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Contracts Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tutorial-basics/create-a-document"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Create a Document</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-drand" class="table-of-contents__link toc-highlight">What is drand?</a></li><li><a href="#supported-networks" class="table-of-contents__link toc-highlight">Supported Networks</a></li><li><a href="#multi-source-randomness-aggregation" class="table-of-contents__link toc-highlight">Multi-Source Randomness Aggregation</a><ul><li><a href="#system-architecture" class="table-of-contents__link toc-highlight">System Architecture</a></li><li><a href="#omnidragonvrfconsumer" class="table-of-contents__link toc-highlight">OmniDragonVRFConsumer</a></li><li><a href="#randomness-buffer-design" class="table-of-contents__link toc-highlight">Randomness Buffer Design</a></li><li><a href="#request-and-fulfillment-flow" class="table-of-contents__link toc-highlight">Request and Fulfillment Flow</a></li><li><a href="#benefits-of-multi-source-randomness" class="table-of-contents__link toc-highlight">Benefits of Multi-Source Randomness</a></li></ul></li><li><a href="#integration-architecture" class="table-of-contents__link toc-highlight">Integration Architecture</a></li><li><a href="#usage-in-smart-contracts" class="table-of-contents__link toc-highlight">Usage in Smart Contracts</a><ul><li><a href="#basic-usage-with-single-source" class="table-of-contents__link toc-highlight">Basic Usage with Single Source</a></li><li><a href="#advanced-usage-with-omnidragonvrfconsumer" class="table-of-contents__link toc-highlight">Advanced Usage with OmniDragonVRFConsumer</a></li></ul></li><li><a href="#implementation-details" class="table-of-contents__link toc-highlight">Implementation Details</a></li><li><a href="#security-considerations" class="table-of-contents__link toc-highlight">Security Considerations</a></li><li><a href="#further-reading" class="table-of-contents__link toc-highlight">Further Reading</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/intro">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/ecosystem/drand-network">Randomness</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/sonicreddragon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/sonicreddragon" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/wenakita/omnidragon" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Sonic Red Dragon. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>